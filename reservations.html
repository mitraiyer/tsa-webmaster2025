<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <script src="script.js" defer></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <title>Noorani Reservation System :3</title>
  
   <!-- Favicon Links -->
   <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
   <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
   <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
   <link rel="manifest" href="/site.webmanifest">

  <!-- Tailwind CSS CDN -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
  
  <!-- React and ReactDOM -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  
  <!-- Babel for JSX support -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.21.2/babel.min.js"></script>
  
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color:#a3d6cf;
      margin-top: 50px;
      font-family: 'Cinzel Decorative', serif;
    }
    .restaurant-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    .header {
      margin-top: 100px;
      background: var(--teal);
      color: white;
      padding: 1rem;
      margin-bottom: 2rem;
      width: 100%;
      font-size: 20px;
    }
    .header p{
      font-family: 'Marcellus', serif;
    }
    label, span, p{
      font-family: 'Inter', sans-serif;
      font-style: bold;
    }
    .header h1{
      font-size: 35px;
    }

  </style>
</head>
<body>
  <nav class="navbar">
    <div class="logo">Noorani</div>
    <div class="nav-links">
        <a href="index.html">Home</a>
        <a href="#">Menu</a>
        <a href="#">About</a>
        <a href="#">Takeout</a>
        <a href="reservations.html">Reservations</a>
        <a href="#">Contact</a>
        <a href="farm-to-table.html">Farm to Table Process</a>
    </div>
    <div class="menu-btn">&#9776;</div>
</nav>
<div class="header">
  <h1 class="text-2xl font-bold text-center">Make A Reservation</h1>
  <p class="text-center">Fine Dining Experience</p>
</div>
  <div class="restaurant-container">
    <div id="reservation-app"></div>
  </div>

  <script type="text/babel">
    const { useState } = React;

    const RestaurantReservation = () => {
      const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]);
      const [selectedTime, setSelectedTime] = useState('');
      const [selectedTable, setSelectedTable] = useState(null);
      const [selectedSeats, setSelectedSeats] = useState([]);
      const [reservationComplete, setReservationComplete] = useState(false);
      const [customerName, setCustomerName] = useState('');
      const [customerEmail, setCustomerEmail] = useState('');
      const [customerPhone, setCustomerPhone] = useState('');
      const [partySize, setPartySize] = useState(2);
      const [showSeatSelector, setShowSeatSelector] = useState(false);
      const [bookFullTable, setBookFullTable] = useState(false);

      // Available time slots in EST
      const timeSlots = ['11:00 AM', '12:00 PM', '1:00 PM', '2:00 PM', '03:00 PM', '04:00 PM', '05:00 PM', '06:00 PM', '07:00 PM', '08:00 PM', '09:00 PM', '10:00 PM'];
      // Restaurant tables configuration with seats
      const tables = [
        { 
          id: 1, 
          x: 50, 
          y: 50, 
          seats: 2, 
          available: true, 
          shape: 'circle', 
          size: 40,
          seatPositions: [
            { id: '1A', x: 50, y: 25, available: true },
            { id: '1B', x: 50, y: 75, available: true }
          ]
        },
        { 
          id: 2, 
          x: 150, 
          y: 50, 
          seats: 2, 
          available: true, 
          shape: 'circle', 
          size: 40,
          seatPositions: [
            { id: '2A', x: 150, y: 25, available: true },
            { id: '2B', x: 150, y: 75, available: true }
          ]
        },
        { 
          id: 3, 
          x: 250, 
          y: 50, 
          seats: 4, 
          available: false, 
          shape: 'rect',
          width: 80, 
          height: 40,
          seatPositions: [
            { id: '3A', x: 220, y: 50, available: false },
            { id: '3B', x: 250, y: 80, available: false },
            { id: '3C', x: 280, y: 50, available: false },
            { id: '3D', x: 250, y: 20, available: false }
          ]
        },
        { 
          id: 4, 
          x: 50, 
          y: 150, 
          seats: 4, 
          available: true, 
          shape: 'rect', 
          width: 80, 
          height: 40,
          seatPositions: [
            { id: '4A', x: 20, y: 150, available: true },
            { id: '4B', x: 50, y: 180, available: true },
            { id: '4C', x: 80, y: 150, available: true },
            { id: '4D', x: 50, y: 120, available: true }
          ]
        },
        { 
          id: 5, 
          x: 150, 
          y: 150, 
          seats: 6, 
          available: true, 
          shape: 'rect', 
          width: 120, 
          height: 40,
          seatPositions: [
            { id: '5A', x: 105, y: 150, available: true },
            { id: '5B', x: 135, y: 180, available: true },
            { id: '5C', x: 165, y: 180, available: true },
            { id: '5D', x: 195, y: 150, available: true },
            { id: '5E', x: 165, y: 120, available: true },
            { id: '5F', x: 135, y: 120, available: true },
          ]
        },
        { 
          id: 6, 
          x: 250, 
          y: 150, 
          seats: 2, 
          available: true, 
          shape: 'circle', 
          size: 40,
          seatPositions: [
            { id: '6A', x: 250, y: 125, available: true },
            { id: '6B', x: 250, y: 175, available: true }
          ]
        },
        { 
          id: 7, 
          x: 350, 
          y: 150, 
          seats: 2, 
          available: true, 
          shape: 'circle', 
          size: 40,
          seatPositions: [
            { id: '7A', x: 350, y: 125, available: true },
            { id: '7B', x: 350, y: 175, available: true }
          ]
        },
        { 
          id: 8, 
          x: 50, 
          y: 250, 
          seats: 4, 
          available: true, 
          shape: 'rect', 
          width: 80, 
          height: 40,
          seatPositions: [
            { id: '8A', x: 20, y: 250, available: true },
            { id: '8B', x: 50, y: 280, available: false }, // This seat is unavailable
            { id: '8C', x: 80, y: 250, available: true },
            { id: '8D', x: 50, y: 220, available: true }
          ]
        },
        { 
          id: 9, 
          x: 150, 
          y: 250, 
          seats: 4, 
          available: false, 
          shape: 'rect', 
          width: 80, 
          height: 40,
          seatPositions: [
            { id: '9A', x: 120, y: 250, available: false },
            { id: '9B', x: 150, y: 280, available: false },
            { id: '9C', x: 180, y: 250, available: false },
            { id: '9D', x: 150, y: 220, available: false }
          ]
        },
        { 
          id: 10, 
          x: 250, 
          y: 250, 
          seats: 8, 
          available: true, 
          shape: 'rect', 
          width: 140, 
          height: 50,
          seatPositions: [
            { id: '10A', x: 195, y: 250, available: true },
            { id: '10B', x: 220, y: 280, available: true },
            { id: '10C', x: 250, y: 280, available: true },
            { id: '10D', x: 280, y: 280, available: true },
            { id: '10E', x: 305, y: 250, available: true },
            { id: '10F', x: 280, y: 220, available: true },
            { id: '10G', x: 250, y: 220, available: true },
            { id: '10H', x: 220, y: 220, available: true }
          ]
        },
      ];

      const handleTableClick = (tableId) => {
        const table = tables.find(t => t.id === tableId);
        if (table && table.available) {
          setSelectedTable(tableId);
          setSelectedSeats([]);
          
          if (bookFullTable) {
            // Auto-select all available seats if booking full table
            const availableSeats = table.seatPositions
              .filter(seat => seat.available)
              .map(seat => seat.id);
            setSelectedSeats(availableSeats);
            setPartySize(availableSeats.length);
          } else {
            setShowSeatSelector(true);
          }
        }
      };

      const handleSeatClick = (seatId) => {
        if (bookFullTable) return; // Disable individual seat selection in full table mode
        
        const currentTable = tables.find(t => t.id === selectedTable);
        const seat = currentTable.seatPositions.find(s => s.id === seatId);
        
        if (!seat.available) return;
        
        if (selectedSeats.includes(seatId)) {
          setSelectedSeats(selectedSeats.filter(id => id !== seatId));
        } else {
          setSelectedSeats([...selectedSeats, seatId]);
        }
      };

      const handleBookingTypeChange = (isFullTable) => {
        setBookFullTable(isFullTable);
        setSelectedSeats([]);
        
        if (isFullTable && selectedTable) {
          // Auto-select all available seats when switching to full table mode
          const table = tables.find(t => t.id === selectedTable);
          const availableSeats = table.seatPositions
            .filter(seat => seat.available)
            .map(seat => seat.id);
          setSelectedSeats(availableSeats);
          setPartySize(availableSeats.length);
        }
      };

      const handleReservation = () => {
        if (!selectedTable || !customerName || !customerEmail || !customerPhone) {
          alert('Please fill in all required fields and select a table');
          return;
        }
        
        if (!bookFullTable && selectedSeats.length === 0) {
          alert('Please select at least one seat');
          return;
        }
        
        setReservationComplete(true);
      };

      const resetForm = () => {
        setSelectedTable(null);
        setSelectedSeats([]);
        setReservationComplete(false);
        setCustomerName('');
        setCustomerEmail('');
        setCustomerPhone('');
        setPartySize(2);
        setShowSeatSelector(false);
      };

      const renderTable = (table) => {
        const isSelected = selectedTable === table.id;
        const baseStyle = {
          cursor: table.available ? 'pointer' : 'not-allowed',
          fill: table.available 
            ? (isSelected ? 'rgba(0, 128, 0, 0.3)' : 'rgba(0, 128, 255, 0.3)') 
            : 'rgba(255, 0, 0, 0.2)',
          stroke: isSelected ? '#004d00' : '#444',
          strokeWidth: isSelected ? 2 : 1,
        };
        
        if (table.shape === 'circle') {
          return (
            <g key={table.id} onClick={() => handleTableClick(table.id)}>
              <circle 
                cx={table.x} 
                cy={table.y} 
                r={table.size / 2} 
                {...baseStyle} 
              />
              <text 
                x={table.x} 
                y={table.y} 
                textAnchor="middle" 
                dominantBaseline="middle" 
                fill="#000" 
                fontSize="12"
              >
                {table.id}
              </text>
              <text 
                x={table.x} 
                y={table.y + 15} 
                textAnchor="middle" 
                dominantBaseline="middle" 
                fill="#333" 
                fontSize="10"
              >
                ({table.seats} seats)
              </text>
            </g>
          );
        } else {
          return (
            <g key={table.id} onClick={() => handleTableClick(table.id)}>
              <rect 
                x={table.x - table.width / 2} 
                y={table.y - table.height / 2} 
                width={table.width} 
                height={table.height} 
                {...baseStyle} 
                rx={4} 
                ry={4}
              />
              <text 
                x={table.x} 
                y={table.y} 
                textAnchor="middle" 
                dominantBaseline="middle" 
                fill="#000" 
                fontSize="12"
              >
                {table.id}
              </text>
              <text 
                x={table.x} 
                y={table.y + 15} 
                textAnchor="middle" 
                dominantBaseline="middle" 
                fill="#333" 
                fontSize="10"
              >
                ({table.seats} seats)
              </text>
            </g>
          );
        }
      };

      const renderSeats = (table) => {
        if (selectedTable !== table.id) return null;
        
        return table.seatPositions.map(seat => {
          const isSelected = selectedSeats.includes(seat.id);
          return (
            <g key={seat.id} onClick={() => seat.available && handleSeatClick(seat.id)}>
              <circle 
                cx={seat.x} 
                cy={seat.y} 
                r={12} 
                fill={!seat.available ? 'rgba(255, 0, 0, 0.4)' : (isSelected ? 'rgba(0, 128, 0, 0.8)' : 'rgba(255, 165, 0, 0.8)')}
                stroke={isSelected ? '#004d00' : '#444'}
                strokeWidth={isSelected ? 2 : 1}
                cursor={seat.available && !bookFullTable ? 'pointer' : 'default'}
              />
              <text 
                x={seat.x} 
                y={seat.y} 
                textAnchor="middle" 
                dominantBaseline="middle" 
                fill="#fff" 
                fontSize="10"
                pointerEvents="none"
              >
                {seat.id.slice(-1)}
              </text>
            </g>
          );
        });
      };

      const getAvailableSeatCount = (tableId) => {
        const table = tables.find(t => t.id === tableId);
        if (!table) return 0;
        return table.seatPositions.filter(seat => seat.available).length;
      };

      return (
        <div className="max-w-4xl mx-auto p-4">
          
          {reservationComplete ? (
            <div className="bg-green-100 p-6 rounded-lg mb-6">
              <h2 className="text-xl font-semibold text-green-800 mb-2">Reservation Confirmed!</h2>
              <p className="mb-1">Thank you, {customerName}, for your reservation.</p>
              <p className="mb-1">Date: {selectedDate}</p>
              <p className="mb-1">Time: {selectedTime}</p>
              <p className="mb-1">Table: {selectedTable}</p>
              {bookFullTable ? (
                <p className="mb-1">Full table reservation: {selectedSeats.length} seats</p>
              ) : (
                <p className="mb-1">Seats: {selectedSeats.join(', ')}</p>
              )}
              <p className="mb-1">Party Size: {partySize} people</p>
              <p className="mb-4">We'll send a confirmation to {customerEmail}</p>
              <button 
                onClick={resetForm}
                className="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
              >
                Make Another Reservation
              </button>
            </div>
          ) : (
            <div className="flex flex-col md:flex-row gap-6">
              <div className="md:w-1/3">
                <div className="mb-6">
                  <h2 className="text-lg font-semibold mb-2">Reservation Type</h2>
                  <div className="flex mb-4">
                    <label className="flex items-center mr-4">
                      <input
                        type="radio"
                        name="bookingType"
                        checked={!bookFullTable}
                        onChange={() => handleBookingTypeChange(false)}
                        className="mr-2"
                      />
                      <span>Book Individual Seats</span>
                    </label>
                    <label className="flex items-center">
                      <input
                        type="radio"
                        name="bookingType"
                        checked={bookFullTable}
                        onChange={() => handleBookingTypeChange(true)}
                        className="mr-2"
                      />
                      <span>Book Full Table</span>
                    </label>
                  </div>
                </div>
                
                <div className="mb-6">
                  <h2 className="text-lg font-semibold mb-2">Reservation Details</h2>
                  <div className="mb-3">
                    <label className="block text-sm font-medium mb-1">Date</label>
                    <input 
                      type="date" 
                      value={selectedDate} 
                      onChange={(e) => setSelectedDate(e.target.value)}
                      className="w-full p-2 border rounded"
                      min={new Date().toISOString().split('T')[0]}
                    />
                  </div>
                  
                  <div className="mb-3">
                    <label className="block text-sm font-medium mb-1">Time</label>
                    <select 
                      value={selectedTime} 
                      onChange={(e) => setSelectedTime(e.target.value)}
                      className="w-full p-2 border rounded"
                    >
                      {timeSlots.map(time => (
                        <option key={time} value={time}>{time}</option>
                      ))}
                    </select>
                  </div>
                  
                  {!bookFullTable && (
                    <div className="mb-3">
                      <label className="block text-sm font-medium mb-1">Party Size</label>
                      <select 
                        value={partySize} 
                        onChange={(e) => setPartySize(parseInt(e.target.value))}
                        className="w-full p-2 border rounded"
                      >
                        {[1, 2, 3, 4, 5, 6, 7, 8].map(size => (
                          <option key={size} value={size}>{size} {size === 1 ? 'person' : 'people'}</option>
                        ))}
                      </select>
                    </div>
                  )}
                </div>
                
                <div className="mb-6">
                  <h2 className="text-lg font-semibold mb-2">Personal Information</h2>
                  <div className="mb-3">
                    <label className="block text-sm font-medium mb-1">Name *</label>
                    <input 
                      type="text" 
                      value={customerName} 
                      onChange={(e) => setCustomerName(e.target.value)}
                      className="w-full p-2 border rounded"
                      required
                    />
                  </div>
                  
                  <div className="mb-3">
                    <label className="block text-sm font-medium mb-1">Email *</label>
                    <input 
                      type="email" 
                      value={customerEmail} 
                      onChange={(e) => setCustomerEmail(e.target.value)}
                      className="w-full p-2 border rounded"
                      required
                    />
                  </div>
                  
                  <div className="mb-3">
                    <label className="block text-sm font-medium mb-1">Phone *</label>
                    <input 
                      type="tel" 
                      value={customerPhone} 
                      onChange={(e) => setCustomerPhone(e.target.value)}
                      className="w-full p-2 border rounded"
                      required
                    />
                  </div>
                </div>
                  
                <button 
                  onClick={handleReservation}
                  disabled={!selectedTable || (!bookFullTable && selectedSeats.length === 0)}
                  className={`w-full p-2 rounded text-white ${!selectedTable || (!bookFullTable && selectedSeats.length === 0) ? 'bg-gray-400' : 'bg-blue-500 hover:bg-blue-600'}`}
                >
                  {!selectedTable ? 'Select a Table' : 'Complete Reservation'}
                </button>
              </div>
              
              <div className="md:w-2/3 bg-gray-100 p-4 rounded-lg">
                <h2 className="text-lg font-semibold mb-2 text-center">Restaurant Layout</h2>
                <p className="text-sm text-center mb-4">
                  <span className="inline-block w-3 h-3 bg-blue-500 rounded-full mr-1"></span> Available Table
                  <span className="inline-block w-3 h-3 bg-red-400 rounded-full mx-1 ml-3"></span> Unavailable Table
                  <span className="inline-block w-3 h-3 bg-green-600 rounded-full mx-1 ml-3"></span> Selected Table
                </p>
                
                {showSeatSelector && selectedTable && !bookFullTable && (
                  <div className="bg-blue-100 p-2 mb-3 rounded text-center">
                    <p className="font-medium mb-1">Select seats at Table {selectedTable}</p>
                    <p className="text-sm">
                      <span className="inline-block w-3 h-3 bg-orange-500 rounded-full mr-1"></span> Available Seat
                      <span className="inline-block w-3 h-3 bg-red-400 rounded-full mx-1 ml-3"></span> Unavailable Seat
                      <span className="inline-block w-3 h-3 bg-green-600 rounded-full mx-1 ml-3"></span> Selected Seat
                    </p>
                  </div>
                )}
                
                <div className="bg-white border rounded-lg p-2 overflow-auto">
                  <svg width="450" height="320" viewBox="0 0 450 320">
                    {/* Restaurant walls */}
                    <rect x="10" y="10" width="430" height="300" fill="none" stroke="#333" strokeWidth="2" />
                    
                    {/* Entrance */}
                    <path d="M 10,160 L 10,120 M 0,140 L 10,140" stroke="#333" strokeWidth="2" />
                    <text x="20" y="140" fontSize="10">Entrance</text>
                    
                    {/* Bar area */}
                    <rect x="330" y="10" width="110" height="60" fill="rgba(150, 75, 0, 0.2)" stroke="#333" />
                    <text x="385" y="40" textAnchor="middle" fontSize="12">Bar</text>
                    
                    {/* Kitchen area */}
                    <rect x="330" y="250" width="110" height="60" fill="rgba(200, 200, 200, 0.5)" stroke="#333" />
                    <text x="385" y="280" textAnchor="middle" fontSize="12">Kitchen</text>
                    
                    {/* Render all tables */}
                    {tables.map(table => renderTable(table))}
                    
                    {/* Render seats for selected table */}
                    {tables.map(table => renderSeats(table))}
                  </svg>
                </div>
                
                <div className="mt-4">
                  {selectedTable ? (
                    <div>
                      <p className="text-center font-medium mb-1">
                        You selected Table {selectedTable} on {selectedDate} at {selectedTime}
                      </p>
                      
                      {bookFullTable ? (
                        <p className="text-center text-sm">
                          Full table reservation: {selectedSeats.length} seats
                        </p>
                      ) : (
                        <p className="text-center text-sm">
                          {selectedSeats.length > 0 ? 
                            `Selected seats: ${selectedSeats.join(', ')} (${selectedSeats.length} seats)` : 
                            'Click on seats to select them'}
                        </p>
                      )}
                    </div>
                  ) : (
                    <p className="text-center text-gray-600">Please select an available table</p>
                  )}
                </div>
              </div>
            </div>
          )}
        </div>
      );
    };

    ReactDOM.render(
      <RestaurantReservation />,
      document.getElementById('reservation-app')
    );
  </script>
</body>
</html>